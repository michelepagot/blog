<!DOCTYPE html>
<html lang="en-us">
	<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="The radare team">
<meta name="description" content="The blog of radare2">
<meta name="generator" content="Hugo 0.74.3" />
<title>chsh -s /usr/bin/r2</title>
<link rel="shortcut icon" href="https://radareorg.github.io/blog/images/favicon.ico">
<link rel="stylesheet" href="https://radareorg.github.io/blog/css/style.css">
<link rel="stylesheet" href="https://radareorg.github.io/blog/css/highlight.css">



<link rel="stylesheet" href="https://radareorg.github.io/blog/css/monosocialiconsfont.css">



<link href="https://radareorg.github.io/blog/index.xml" rel="alternate" type="application/rss+xml" title="The Official Radare Blog" />


<meta property="og:title" content="chsh -s /usr/bin/r2" />
<meta property="og:description" content="Radare2&rsquo;s prompt is quite powerful and handy to use, but sometimes you need to interact with the filesystem or spawn system programs.. and spawning new shells or quitting r2 is not an option.
For those cases, the simplest solution would be to just type ! and then type the shell command you like. This prefix command will just escape to the shell and run the text you type as in the system shell." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://radareorg.github.io/blog/posts/r2-as-a-unix-shell/" />
<meta property="article:published_time" content="2015-08-26T16:36:33+02:00" />
<meta property="article:modified_time" content="2015-08-26T16:36:33+02:00" />


<meta itemprop="name" content="chsh -s /usr/bin/r2">
<meta itemprop="description" content="Radare2&rsquo;s prompt is quite powerful and handy to use, but sometimes you need to interact with the filesystem or spawn system programs.. and spawning new shells or quitting r2 is not an option.
For those cases, the simplest solution would be to just type ! and then type the shell command you like. This prefix command will just escape to the shell and run the text you type as in the system shell.">
<meta itemprop="datePublished" content="2015-08-26T16:36:33+02:00" />
<meta itemprop="dateModified" content="2015-08-26T16:36:33+02:00" />
<meta itemprop="wordCount" content="533">



<meta itemprop="keywords" content="" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="chsh -s /usr/bin/r2"/>
<meta name="twitter:description" content="Radare2&rsquo;s prompt is quite powerful and handy to use, but sometimes you need to interact with the filesystem or spawn system programs.. and spawning new shells or quitting r2 is not an option.
For those cases, the simplest solution would be to just type ! and then type the shell command you like. This prefix command will just escape to the shell and run the text you type as in the system shell."/>


    </head>
<body>
    <nav class="main-nav">
	
		<a href='https://radareorg.github.io/blog'> <span class="arrow">‚Üê</span>Home</a>
	

	

	
		<a class="cta" href="https://radareorg.github.io/blog/index.xml">Subscribe</a>
	
</nav>

    <section id="wrapper">
        
        
<article class="post">
    <header>
        <h1>chsh -s /usr/bin/r2</h1>
        <h2 class="subtitle"></h2>
        <h2 class="headline">
        August 26, 2015
        <br>
        
        </h2>
    </header>
    <section id="post-body">
        <p>Radare2&rsquo;s prompt is quite powerful and handy to use, but sometimes you need to interact with the filesystem or spawn system programs.. and spawning new shells or quitting r2 is not an option.</p>
<p>For those cases, the simplest solution would be to just type <code>!</code> and then type the shell command you like. This prefix command will just escape to the shell and run the text you type as in the system shell.</p>
<p>Radare2 also implements pipes, like <code>pif | wc -l</code> to count the number of instructions in a function (careful, commands after the pipe are shell commands, not radare2 ones!). If you want to count the number of lines of a command you can also do it with the internal grep operator in r2 <code>~</code>, using the &lsquo;?&rsquo; modifier like this: <code>pif~?</code>.</p>
<p>If you want to use the result of a command inside another one, just surround it with <code>`</code>, like <code>`pi `?v 2 + 2`</code>.</p>
<p>To run several commands in a row, you can separate them with a <code>;</code>. Now you&rsquo;re wondering what to do when you actually need to use a <code>;</code> in a command, like to do some ROP-gadget search. Simply double-quote <strong>the whole command</strong>: <code>&quot;/R/ pop e[abc]x;ret&quot;</code></p>
<p>Sometimes, you&rsquo;re running radare2 in a <!-- raw HTML omitted -->shitty<!-- raw HTML omitted --> highy-restricted/complex environment, and you don&rsquo;t have a shell (for example, when you boot to radare2). This is why we have re-implemented some useful shell commands directly into radare2, like <code>ls</code>, <code>pwd</code>, <code>cd</code>, <code>rm</code>, <code>mv</code>, &hellip; and also an internal <em>grep</em>!</p>
<p>You can grep on words <code>pdf~exit</code> to grep on <code>exit</code>, you can count number of line with it <code>pif~?</code>, to indent JSON like <code>pij~{}</code>, use the internal pager on the whole thing with <code>pij~{}..</code> (yes, the internal pager is <code>..</code>); but one of its most powerful feature is the ability to select by columns, with the bracket operator: <code>iz~[1]</code> to select only the first column, <code>iz~1337[1]</code> to select the first column of the matching results.</p>
<p>To manage your opened file, feel free to check the relevant documentation in <code>oo?</code>. The most useful commands being <code>oo+</code> to reopen the file in read-write mode and <code>ood</code> to reopen it in debug mode.</p>
<p>To finish this blogpost, allow us to mention the fact that radare2 has its own webserver. While this might seems super-overkill, it&rsquo;s actually useful to debug embedded systems, for example, a watch of an iPhone. Simply launch the web server with <code>=h port</code> and connect to it with your web-browser; you can now debug your device within the web-interface, remotely! You can also use this one liner: <code>r2 -qc=h /bin/ls</code>.</p>
<p>In some cases, you&rsquo;ll probably be interested in exposing the filesystem of the device to the outer world by using the internal HTTP server. This is done with the &lsquo;=h&rsquo; command, but you&rsquo;ll need to tune some variables to share the rootfs instead of the r2 webui:</p>
<pre><code>&gt; e http.root=/
&gt; e http.bind=0.0.0.0
&gt; e http.port=9999
&gt; =h
</code></pre><p>If you don&rsquo;t like the webui, you can always use the <code>rap</code> protocol with <code>=: port</code>, and connect to it by issuing <code>o rap://9999</code>. Both remote interfaces can be used from the commandline of r2 by using the <code>r2web://</code>, <code>rap://</code>, <code>r2pipe://</code> and <code>r2 -C</code> connection methods.</p>

    </section>
</article>

<footer id="post-meta" class="clearfix">
    <a href="https://twitter.com/radareorg">
    <img class="avatar" src="https://radareorg.github.io/blog/images/avatar.png">
    <div>
        <span class="dark">The radare team</span>
        <span></span>
    </div>
    </a>
    <section id="sharing">
        <a class="twitter" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fradareorg.github.io%2fblog%2fposts%2fr2-as-a-unix-shell%2f - chsh%20-s%20%2fusr%2fbin%2fr2 by @radareorg"><span class="icon-twitter"> https://twitter.com/radareorg</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

    </section>
</footer>



<ul id="post-list" class="archive readmore">
    <h3>Read more</h3>

    
    
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/sleigh_disassembler_backend/">GSoC 2020: SLEIGH Disassembler Backend<aside class="dates">Sep 6 2020</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/rsoc-2019-console-interface-improvement/">RSoC 2019 Final: Console Interface Improvements<aside class="dates">Oct 1 2019</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/rsoc-2019-selection/">Radare2 Summer of Code 2019 Selection Results<aside class="dates">Apr 2 2019</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/radare2-survey/">Radare2 Community Survey Results<aside class="dates">Feb 2 2019</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/radare2-bioinformatics/">Radare2 and bioinformatics: a good match?<aside class="dates">Aug 31 2018</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/cutter_debug/">GSoC 2018 Final: Debugging and Emulation Support for Cutter<aside class="dates">Aug 20 2018</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/cli_improvements/">GSoC 2018 Final: Console Interface Improvementes<aside class="dates">Aug 19 2018</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/gsoc_2018_radeco_cfs/">GSoC 2018: Control Flow Structuring for Radeco-lib<aside class="dates">Aug 12 2018</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/gsoc_2018_radeco_pseudo_c_code_generation/">Gsoc 2018 Radeco Pseudo C Code Generation<aside class="dates">Aug 12 2018</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/type_inference/">GSoC&#39;18 Final: Type inference<aside class="dates">Aug 12 2018</aside></a>
        </li>
    
</ul>



        <footer id="footer">
    
    <p class="small">
    
        The radare team
    
    </p>
</footer>

    </section>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://radareorg.github.io/blog/js/main.js"></script>
<script src="https://radareorg.github.io/blog/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>





</body>
</html>
