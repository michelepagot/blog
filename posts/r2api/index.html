<!DOCTYPE html>
<html lang="en-us">
	<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="The radare team">
<meta name="description" content="The blog of radare2">
<meta name="generator" content="Hugo 0.74.3" />
<title>r2pipe API</title>
<link rel="shortcut icon" href="https://radareorg.github.io/blog/images/favicon.ico">
<link rel="stylesheet" href="https://radareorg.github.io/blog/css/style.css">
<link rel="stylesheet" href="https://radareorg.github.io/blog/css/highlight.css">



<link rel="stylesheet" href="https://radareorg.github.io/blog/css/monosocialiconsfont.css">



<link href="https://radareorg.github.io/blog/index.xml" rel="alternate" type="application/rss+xml" title="The Official Radare Blog" />


<meta property="og:title" content="r2pipe API" />
<meta property="og:description" content="r2pipe
The r2pipe design comes from the fact that using native APIs is much more complex and slower rather than using raw command strings and parsing the output. It encourages users to write pipe implementations which interact with the &ldquo;quiet&rdquo; mode of radare2 and use JSONs for easier deserialization. We have multiple implementations already present with a number of users opting to use exploratory languages such as Python and Ruby." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://radareorg.github.io/blog/posts/r2api/" />
<meta property="article:published_time" content="2017-07-17T00:00:00+01:00" />
<meta property="article:modified_time" content="2017-07-17T00:00:00+01:00" />


<meta itemprop="name" content="r2pipe API">
<meta itemprop="description" content="r2pipe
The r2pipe design comes from the fact that using native APIs is much more complex and slower rather than using raw command strings and parsing the output. It encourages users to write pipe implementations which interact with the &ldquo;quiet&rdquo; mode of radare2 and use JSONs for easier deserialization. We have multiple implementations already present with a number of users opting to use exploratory languages such as Python and Ruby.">
<meta itemprop="datePublished" content="2017-07-17T00:00:00+01:00" />
<meta itemprop="dateModified" content="2017-07-17T00:00:00+01:00" />
<meta itemprop="wordCount" content="479">



<meta itemprop="keywords" content="" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="r2pipe API"/>
<meta name="twitter:description" content="r2pipe
The r2pipe design comes from the fact that using native APIs is much more complex and slower rather than using raw command strings and parsing the output. It encourages users to write pipe implementations which interact with the &ldquo;quiet&rdquo; mode of radare2 and use JSONs for easier deserialization. We have multiple implementations already present with a number of users opting to use exploratory languages such as Python and Ruby."/>


    </head>
<body>
    <nav class="main-nav">
	
		<a href='https://radareorg.github.io/blog'> <span class="arrow">‚Üê</span>Home</a>
	

	

	
		<a class="cta" href="https://radareorg.github.io/blog/index.xml">Subscribe</a>
	
</nav>

    <section id="wrapper">
        
        
<article class="post">
    <header>
        <h1>r2pipe API</h1>
        <h2 class="subtitle"></h2>
        <h2 class="headline">
        July 17, 2017
        <br>
        
        </h2>
    </header>
    <section id="post-body">
        <p><strong>r2pipe</strong></p>
<p>The r2pipe design comes from the fact that using native APIs is much more
complex and slower rather than using raw command strings and parsing the output.
It encourages users to write pipe implementations which interact with the
&ldquo;quiet&rdquo; mode of radare2 and use JSONs for easier deserialization. We have
multiple <a href="https://github.com/radare/radare2-r2pipe">implementations</a> already
present with a number of users opting to use exploratory languages such as
Python and Ruby.</p>
<p><strong>Why r2api?</strong></p>
<p>The pipe ideally was envisioned to consist of a simple interface to spawn a r2
instance and setup remote communication with it either through pipes, HTTP, TCP
or what have you. But as the community decided to make more use of r2pipe they
also felt that the implementations should support certain higher level
abstractions through use of classes, helper functions(beyond the ones already
provided by r2) or structures to be more productive and expressive scripting.</p>
<p>This was implemented as a part of
<a href="https://github.com/radare/r2pipe.rs">r2pipe.rs</a> which was written in Rust, a
language which heavily influences the style of programming due strong typing
features. Other rust-based projects such as radeco and rune which use r2 as
their binary loader so to say, shared certain requirements in terms of
high-level structures they wished to operate on. Hence those features were added
to r2pipe.rs as a part of the base implementation. But as the requirements
grew, the logic started moving away from the original idea and hence the
community decided to seperate the two and move these features into a seperate
playground.</p>
<p><a href="https://github.com/radare/radare2-r2pipe-api">radare2-r2pipe-api</a> is where you
can add support for abstractions in your favorite language while keeping the
underlying communication intact. This was recently taken up for Rust, and the
API changes have been propagated to (active :P)repositories.</p>
<p><strong>Build fixes for Rust users:</strong></p>
<p>In case you are a r2pipe.rs/radeco-lib/rune user, you should update your
dependencies and the default rust toolchain as well.</p>
<p>Add the r2api dependecy in your Cargo.toml file:</p>
<pre><code>[dependecies.r2api]
git = &quot;https://github.com/radare/radare2-r2pipe-api&quot;
</code></pre><p>Add crate usage in your lib.rs:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> r2api;
</code></pre></div><p>All the structures have been moved under the <code>structs</code> module of r2api. Hence:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#75715e">// use r2pipe::structs::LOpinfo;
</span><span style="color:#75715e">// Replace the above line with:
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> r2api::structs::LOpinfo;
</code></pre></div><p>The entire set of r2pipe functions operating on the r2 instance are now a part
of the <code>R2Api</code> trait implemented for <code>R2</code>. Hence, just add the follwing line to
files where you call functions on the r2 instance from r2pipe:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">use</span> r2pipe::r2::R2;
<span style="color:#75715e">// Add the line below
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> r2api::api_trait::R2Api;
</code></pre></div><p>Cargo deps can be updated as below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cargo clean <span style="color:#75715e"># Necessary for removing earlier conflicting versions</span>
$ cargo update
$ cargo build
</code></pre></div><p>The community hopes to see better support for more languages being added to the
new repository. There are also plans to standardize much of the implementation
and design so make sure to contribute to the discussions! Till then, don&rsquo;t
forget to renew your r2 license regularly.</p>
<p>Relevant pull requests:</p>
<ul>
<li><a href="https://github.com/radare/radare2-r2pipe-api/pull/1">radare2-r2pipe-api</a></li>
<li><a href="https://github.com/radare/radeco-lib/pull/64">radeco-lib</a></li>
<li><a href="https://github.com/radare/r2pipe.rs/pull/23">r2pipe.rs</a></li>
<li><a href="https://github.com/sushant94/rune/pull/29">rune</a></li>
</ul>

    </section>
</article>

<footer id="post-meta" class="clearfix">
    <a href="https://twitter.com/radareorg">
    <img class="avatar" src="https://radareorg.github.io/blog/images/avatar.png">
    <div>
        <span class="dark">The radare team</span>
        <span></span>
    </div>
    </a>
    <section id="sharing">
        <a class="twitter" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fradareorg.github.io%2fblog%2fposts%2fr2api%2f - r2pipe%20API by @radareorg"><span class="icon-twitter"> https://twitter.com/radareorg</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

    </section>
</footer>



<ul id="post-list" class="archive readmore">
    <h3>Read more</h3>

    
    
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/sleigh_disassembler_backend/">GSoC 2020: SLEIGH Disassembler Backend<aside class="dates">Sep 6 2020</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/rsoc-2019-console-interface-improvement/">RSoC 2019 Final: Console Interface Improvements<aside class="dates">Oct 1 2019</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/rsoc-2019-selection/">Radare2 Summer of Code 2019 Selection Results<aside class="dates">Apr 2 2019</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/radare2-survey/">Radare2 Community Survey Results<aside class="dates">Feb 2 2019</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/radare2-bioinformatics/">Radare2 and bioinformatics: a good match?<aside class="dates">Aug 31 2018</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/cutter_debug/">GSoC 2018 Final: Debugging and Emulation Support for Cutter<aside class="dates">Aug 20 2018</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/cli_improvements/">GSoC 2018 Final: Console Interface Improvementes<aside class="dates">Aug 19 2018</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/gsoc_2018_radeco_cfs/">GSoC 2018: Control Flow Structuring for Radeco-lib<aside class="dates">Aug 12 2018</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/gsoc_2018_radeco_pseudo_c_code_generation/">Gsoc 2018 Radeco Pseudo C Code Generation<aside class="dates">Aug 12 2018</aside></a>
        </li>
    
        <li>
            <a href="https://radareorg.github.io/blog/posts/type_inference/">GSoC&#39;18 Final: Type inference<aside class="dates">Aug 12 2018</aside></a>
        </li>
    
</ul>



        <footer id="footer">
    
    <p class="small">
    
        The radare team
    
    </p>
</footer>

    </section>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://radareorg.github.io/blog/js/main.js"></script>
<script src="https://radareorg.github.io/blog/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>





</body>
</html>
